<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dynamic Language Support :: Spring</title>
    <meta name="generator" content="Antora 3.0.0-alpha.8">
    <link rel="stylesheet" href="../../../_/css/site.css">

<link href="../../../_/img/favicon.ico" rel='shortcut icon' type='image/vnd.microsoft.icon'>
<link rel="stylesheet" href="../../../_/css/vendor/docsearch.min.css">
<!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">
        <img id="springlogo" class="block" src="../../../_/img/spring-logo.svg" alt="Spring">
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://spring.io/">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Why Spring</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/why-spring">Overview</a>
            <a class="navbar-item" href="https://spring.io/microservices">Microservices</a>
            <a class="navbar-item" href="https://spring.io/reactive">Reactive</a>
            <a class="navbar-item" href="https://spring.io/event-driven">Event Driven</a>
            <a class="navbar-item" href="https://spring.io/cloud">Cloud</a>
            <a class="navbar-item" href="https://spring.io/web-applications">Web Applications</a>
            <a class="navbar-item" href="https://spring.io/serverless">Serverless</a>
            <a class="navbar-item" href="https://spring.io/batch">Batch</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Learn</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/learn">Overview</a>
            <a class="navbar-item" href="https://spring.io/quickstart">Quickstart</a>
            <a class="navbar-item" href="https://spring.io/guides">Guides</a>
            <a class="navbar-item" href="https://spring.io/blog">Blog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/projects">Overview</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-boot">Spring Boot</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-framework">Spring Framework</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-cloud">Spring Cloud</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-cloud-dataflow">Spring Cloud Data Flow</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-data">Spring Data</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-integration">Spring Integration</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-batch">Spring Batch</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-security">Spring Security</a>
            <a class="navbar-item" class="blue mb-2 inline-block" href="https://spring.io/projects">View all projects</a>
            <a class="navbar-item" href="https://spring.io/tools">Spring Tools 4</a>
          </div>
        </div>

        <a class="navbar-item" href="https://spring.io/training">Training</a>
        <a class="navbar-item" href="https://spring.io/support">Support</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/community">Overview</a>
            <a class="navbar-item" href="https://spring.io/events">Events</a>
            <a class="navbar-item" href="https://spring.io/team">Team</a>
          </div>
        </div>
      </div>
    </div>
    <div id="switch-theme">
      <input type="checkbox" id="switch-theme-checkbox" />
      <label for="switch-theme-checkbox">Dark Theme</label>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="framework" data-version="5.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Spring Framework</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core.html">Core</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core/beans/index.html">The IoC Container</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/container.html">Container Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/bean.html">Bean Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/dependencies.html">Bean Dependencies</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/scopes.html">Bean Scopes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/customizing.html">Customizing the Nature of a Bean</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/inheritance.html">Bean Definition Inheritance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/extension.html">Container Extension Points</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/annotation.html">Annotation-based Container Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/scanning.html">Classpath Scanning and Managed Components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/jsr330.html">Using JSR 330 Standard Annotations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/java.html">Java-based Container configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/env.html">Environment Abstraction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/loadtimeweaver.html">Registering a LoadTimeWeaver</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/applicationcontext.html">Additional Capabilities of the ApplicationContext</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/beans/beanfactory.html">The BeanFactory</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/resources.html">Resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/validation.html">Validation, Data Binding, and Type Conversion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/aop.html">Aspect Oriented Programming with Spring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/aop-api.html">Spring AOP APIs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/null-safety.html">Null-safety</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/databuffer-codec.html">Data Buffers and Codecs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/spring-jcl.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../testing.html">Testing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../data-access.html">Data Access</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../web.html">Web Servlet</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../web-reactive.html">Web Reactive</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../integration.html">Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../languages.html">Languages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Spring Framework</span>
    <span class="version">5.3</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Spring Framework</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">5.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../security/index.html">Spring Security</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../security/index.html">6</a>
        </li>
        <li class="version">
          <a href="../../../security/5.6/index.html">5.6</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../session/2.6/index.html">Spring Session</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../session/2.6/index.html">2.6</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Spring Framework</a></li>
    <li><a href="dynamic-languages.html">Dynamic Language Support</a></li>
  </ul>
</nav>
<div>
  <input id="search-input" type="text" placeholder="Search docs">
</div>
  <div class="edit-this-page"><a href="https://github.com/rwinch/spring-framework/edit/antora-2.x/src/docs/antora/modules/ROOT/pages/languages/dynamic-languages.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Dynamic Language Support</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Spring provides comprehensive support for using classes and objects that have been
defined by using a dynamic language (such as Groovy) with Spring. This support lets
you write any number of classes in a supported dynamic language and have the Spring
container transparently instantiate, configure, and dependency inject the resulting
objects.</p>
</div>
<div class="paragraph">
<p>Spring&#8217;s scripting support primarily targets Groovy and BeanShell. Beyond those
specifically supported languages, the JSR-223 scripting mechanism is supported
for integration with any JSR-223 capable language provider (as of Spring 4.2),
e.g. JRuby.</p>
</div>
<div class="paragraph">
<p>You can find fully working examples of where this dynamic language support can be
immediately useful in <a href="#dynamic-language-scenarios">Scenarios</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dynamic-language-a-first-example"><a class="anchor" href="#dynamic-language-a-first-example"></a>A First Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The bulk of this chapter is concerned with describing the dynamic language support in
detail. Before diving into all of the ins and outs of the dynamic language support,
we look at a quick example of a bean defined in a dynamic language. The dynamic
language for this first bean is Groovy. (The basis of this example was taken from the
Spring test suite. If you want to see equivalent examples in any of the other
supported languages, take a look at the source code).</p>
</div>
<div class="paragraph">
<p>The next example shows the <code>Messenger</code> interface, which the Groovy bean is going to
implement. Note that this interface is defined in plain Java. Dependent objects that
are injected with a reference to the <code>Messenger</code> do not know that the underlying
implementation is a Groovy script. The following listing shows the <code>Messenger</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.springframework.scripting;

public interface Messenger {

	String getMessage();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example defines a class that has a dependency on the <code>Messenger</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.springframework.scripting;

public class DefaultBookingService implements BookingService {

	private Messenger messenger;

	public void setMessenger(Messenger messenger) {
		this.messenger = messenger;
	}

	public void processBooking() {
		// use the injected Messenger object...
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example implements the <code>Messenger</code> interface in Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// from the file 'Messenger.groovy'
package org.springframework.scripting.groovy;

// import the Messenger interface (written in Java) that is to be implemented
import org.springframework.scripting.Messenger

// define the implementation in Groovy
class GroovyMessenger implements Messenger {

	String message
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To use the custom dynamic language tags to define dynamic-language-backed beans, you
need to have the XML Schema preamble at the top of your Spring XML configuration file.
You also need to use a Spring <code>ApplicationContext</code> implementation as your IoC
container. Using the dynamic-language-backed beans with a plain <code>BeanFactory</code>
implementation is supported, but you have to manage the plumbing of the Spring internals
to do so.</p>
</div>
<div class="paragraph">
<p>For more information on schema-based configuration, see <a href="#xsd-schemas-lang">XML Schema-based Configuration</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally, the following example shows the bean definitions that effect the injection of the
Groovy-defined <code>Messenger</code> implementation into an instance of the
<code>DefaultBookingService</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:lang="http://www.springframework.org/schema/lang"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/lang https://www.springframework.org/schema/lang/spring-lang.xsd"&gt;

	&lt;!-- this is the bean definition for the Groovy-backed Messenger implementation --&gt;
	&lt;lang:groovy id="messenger" script-source="classpath:Messenger.groovy"&gt;
		&lt;lang:property name="message" value="I Can Do The Frug" /&gt;
	&lt;/lang:groovy&gt;

	&lt;!-- an otherwise normal bean that will be injected by the Groovy-backed Messenger --&gt;
	&lt;bean id="bookingService" class="x.y.DefaultBookingService"&gt;
		&lt;property name="messenger" ref="messenger" /&gt;
	&lt;/bean&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>bookingService</code> bean (a <code>DefaultBookingService</code>) can now use its private <code>messenger</code>
member variable as normal, because the <code>Messenger</code> instance that was injected into it is
a <code>Messenger</code> instance. There is nothing special going on here&#8201;&#8212;&#8201;just plain Java and
plain Groovy.</p>
</div>
<div class="paragraph">
<p>Hopefully, the preceding XML snippet is self-explanatory, but do not worry unduly if it is not.
Keep reading for the in-depth detail on the whys and wherefores of the preceding configuration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dynamic-language-beans"><a class="anchor" href="#dynamic-language-beans"></a>Defining Beans that Are Backed by Dynamic Languages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes exactly how you define Spring-managed beans in any of the
supported dynamic languages.</p>
</div>
<div class="paragraph">
<p>Note that this chapter does not attempt to explain the syntax and idioms of the supported
dynamic languages. For example, if you want to use Groovy to write certain of the classes
in your application, we assume that you already know Groovy. If you need further details
about the dynamic languages themselves, see <a href="#dynamic-language-resources">Further Resources</a> at the end of
this chapter.</p>
</div>
<div class="sect2">
<h3 id="dynamic-language-beans-concepts"><a class="anchor" href="#dynamic-language-beans-concepts"></a>Common Concepts</h3>
<div class="paragraph">
<p>The steps involved in using dynamic-language-backed beans are as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Write the test for the dynamic language source code (naturally).</p>
</li>
<li>
<p>Then write the dynamic language source code itself.</p>
</li>
<li>
<p>Define your dynamic-language-backed beans by using the appropriate <code>&lt;lang:language/&gt;</code>
element in the XML configuration (you can define such beans programmatically by
using the Spring API, although you will have to consult the source code for
directions on how to do this, as this chapter does not cover this type of advanced configuration).
Note that this is an iterative step. You need at least one bean definition for each dynamic
language source file (although multiple bean definitions can reference the same source file).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The first two steps (testing and writing your dynamic language source files) are beyond
the scope of this chapter. See the language specification and reference manual
for your chosen dynamic language and crack on with developing your dynamic language
source files. You first want to read the rest of this chapter, though, as
Spring&#8217;s dynamic language support does make some (small) assumptions about the contents
of your dynamic language source files.</p>
</div>
<div class="sect3">
<h4 id="dynamic-language-beans-concepts-xml-language-element"><a class="anchor" href="#dynamic-language-beans-concepts-xml-language-element"></a>The &lt;lang:language/&gt; element</h4>
<div class="paragraph">
<p>The final step in the list in the <a href="#dynamic-language-beans-concepts">preceding section</a>
involves defining dynamic-language-backed bean definitions, one for each bean that you
want to configure (this is no different from normal JavaBean configuration). However,
instead of specifying the fully qualified class name of the class that is to be
instantiated and configured by the container, you can use the <code>&lt;lang:language/&gt;</code>
element to define the dynamic language-backed bean.</p>
</div>
<div class="paragraph">
<p>Each of the supported languages has a corresponding <code>&lt;lang:language/&gt;</code> element:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;lang:groovy/&gt;</code> (Groovy)</p>
</li>
<li>
<p><code>&lt;lang:bsh/&gt;</code> (BeanShell)</p>
</li>
<li>
<p><code>&lt;lang:std/&gt;</code> (JSR-223, e.g. with JRuby)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The exact attributes and child elements that are available for configuration depends on
exactly which language the bean has been defined in (the language-specific sections
later in this chapter detail this).</p>
</div>
</div>
<div class="sect3">
<h4 id="dynamic-language-refreshable-beans"><a class="anchor" href="#dynamic-language-refreshable-beans"></a>Refreshable Beans</h4>
<div class="paragraph">
<p>One of the (and perhaps the single) most compelling value adds of the dynamic language
support in Spring is the &#8220;refreshable bean&#8221; feature.</p>
</div>
<div class="paragraph">
<p>A refreshable bean is a dynamic-language-backed bean. With a small amount of
configuration, a dynamic-language-backed bean can monitor changes in its underlying
source file resource and then reload itself when the dynamic language source file is
changed (for example, when you edit and save changes to the file on the file system).</p>
</div>
<div class="paragraph">
<p>This lets you deploy any number of dynamic language source files as part of an
application, configure the Spring container to create beans backed by dynamic
language source files (using the mechanisms described in this chapter), and (later,
as requirements change or some other external factor comes into play) edit a dynamic
language source file and have any change they make be reflected in the bean that is
backed by the changed dynamic language source file. There is no need to shut down a
running application (or redeploy in the case of a web application). The
dynamic-language-backed bean so amended picks up the new state and logic from the
changed dynamic language source file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This feature is off by default.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we can take a look at an example to see how easy it is to start using refreshable
beans. To turn on the refreshable beans feature, you have to specify exactly one
additional attribute on the <code>&lt;lang:language/&gt;</code> element of your bean definition. So,
if we stick with <a href="#dynamic-language-a-first-example">the example</a> from earlier in
this chapter, the following example shows what we would change in the Spring XML
configuration to effect refreshable beans:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;beans&gt;

	&lt;!-- this bean is now 'refreshable' due to the presence of the 'refresh-check-delay' attribute --&gt;
	&lt;lang:groovy id="messenger"
			refresh-check-delay="5000" &lt;!-- switches refreshing on with 5 seconds between checks --&gt;
			script-source="classpath:Messenger.groovy"&gt;
		&lt;lang:property name="message" value="I Can Do The Frug" /&gt;
	&lt;/lang:groovy&gt;

	&lt;bean id="bookingService" class="x.y.DefaultBookingService"&gt;
		&lt;property name="messenger" ref="messenger" /&gt;
	&lt;/bean&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>That really is all you have to do. The <code>refresh-check-delay</code> attribute defined on the
<code>messenger</code> bean definition is the number of milliseconds after which the bean is
refreshed with any changes made to the underlying dynamic language source file.
You can turn off the refresh behavior by assigning a negative value to the
<code>refresh-check-delay</code> attribute. Remember that, by default, the refresh behavior is
disabled. If you do not want the refresh behavior, do not define the attribute.</p>
</div>
<div class="paragraph">
<p>If we then run the following application, we can exercise the refreshable feature.
(Please excuse the &#8220;jumping-through-hoops-to-pause-the-execution&#8221; shenanigans
in this next slice of code.) The <code>System.in.read()</code> call is only there so that the
execution of the program pauses while you (the developer in this scenario) go off
and edit the underlying dynamic language source file so that the refresh triggers
on the dynamic-language-backed bean when the program resumes execution.</p>
</div>
<div class="paragraph">
<p>The following listing shows this sample application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.scripting.Messenger;

public final class Boot {

	public static void main(final String[] args) throws Exception {
		ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");
		Messenger messenger = (Messenger) ctx.getBean("messenger");
		System.out.println(messenger.getMessage());
		// pause execution while I go off and make changes to the source file...
		System.in.read();
		System.out.println(messenger.getMessage());
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assume then, for the purposes of this example, that all calls to the <code>getMessage()</code>
method of <code>Messenger</code> implementations have to be changed such that the message is
surrounded by quotation marks. The following listing shows the changes that you
(the developer) should make to the <code>Messenger.groovy</code> source file when the
execution of the program is paused:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">package org.springframework.scripting

class GroovyMessenger implements Messenger {

	private String message = "Bingo"

	public String getMessage() {
		// change the implementation to surround the message in quotes
		return "'" + this.message + "'"
	}

	public void setMessage(String message) {
		this.message = message
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the program runs, the output before the input pause will be <code>I Can Do The Frug</code>.
After the change to the source file is made and saved and the program resumes execution,
the result of calling the <code>getMessage()</code> method on the dynamic-language-backed
<code>Messenger</code> implementation is <code>'I Can Do The Frug'</code> (notice the inclusion of the
additional quotation marks).</p>
</div>
<div class="paragraph">
<p>Changes to a script do not trigger a refresh if the changes occur within the window of
the <code>refresh-check-delay</code> value. Changes to the script are not actually picked up until
a method is called on the dynamic-language-backed bean. It is only when a method is
called on a dynamic-language-backed bean that it checks to see if its underlying script
source has changed. Any exceptions that relate to refreshing the script (such as
encountering a compilation error or finding that the script file has been deleted)
results in a fatal exception being propagated to the calling code.</p>
</div>
<div class="paragraph">
<p>The refreshable bean behavior described earlier does not apply to dynamic language
source files defined with the <code>&lt;lang:inline-script/&gt;</code> element notation (see
<a href="#dynamic-language-beans-inline">Inline Dynamic Language Source Files</a>). Additionally, it applies only to beans where
changes to the underlying source file can actually be detected (for example, by code
that checks the last modified date of a dynamic language source file that exists on the
file system).</p>
</div>
</div>
<div class="sect3">
<h4 id="dynamic-language-beans-inline"><a class="anchor" href="#dynamic-language-beans-inline"></a>Inline Dynamic Language Source Files</h4>
<div class="paragraph">
<p>The dynamic language support can also cater to dynamic language source files that are
embedded directly in Spring bean definitions. More specifically, the
<code>&lt;lang:inline-script/&gt;</code> element lets you define dynamic language source immediately
inside a Spring configuration file. An example might clarify how the inline script
feature works:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;lang:groovy id="messenger"&gt;
	&lt;lang:inline-script&gt;

package org.springframework.scripting.groovy;

import org.springframework.scripting.Messenger

class GroovyMessenger implements Messenger {
	String message
}

	&lt;/lang:inline-script&gt;
	&lt;lang:property name="message" value="I Can Do The Frug" /&gt;
&lt;/lang:groovy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we put to one side the issues surrounding whether it is good practice to define
dynamic language source inside a Spring configuration file, the <code>&lt;lang:inline-script/&gt;</code>
element can be useful in some scenarios. For instance, we might want to quickly add a
Spring <code>Validator</code> implementation to a Spring MVC <code>Controller</code>. This is but a moment&#8217;s
work using inline source. (See <a href="#dynamic-language-scenarios-validators">Scripted Validators</a> for such an
example.)</p>
</div>
</div>
<div class="sect3">
<h4 id="dynamic-language-beans-ctor-injection"><a class="anchor" href="#dynamic-language-beans-ctor-injection"></a>Understanding Constructor Injection in the Context of Dynamic-language-backed Beans</h4>
<div class="paragraph">
<p>There is one very important thing to be aware of with regard to Spring&#8217;s dynamic
language support. Namely, you can not (currently) supply constructor arguments
to dynamic-language-backed beans (and, hence, constructor-injection is not available for
dynamic-language-backed beans). In the interests of making this special handling of
constructors and properties 100% clear, the following mixture of code and configuration
does not work:</p>
</div>
<div class="listingblock">
<div class="title">An approach that cannot work</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// from the file 'Messenger.groovy'
package org.springframework.scripting.groovy;

import org.springframework.scripting.Messenger

class GroovyMessenger implements Messenger {

	GroovyMessenger() {}

	// this constructor is not available for Constructor Injection
	GroovyMessenger(String message) {
		this.message = message;
	}

	String message

	String anotherMessage
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;lang:groovy id="badMessenger"
	script-source="classpath:Messenger.groovy"&gt;
	&lt;!-- this next constructor argument will not be injected into the GroovyMessenger --&gt;
	&lt;!-- in fact, this isn't even allowed according to the schema --&gt;
	&lt;constructor-arg value="This will not work" /&gt;

	&lt;!-- only property values are injected into the dynamic-language-backed object --&gt;
	&lt;lang:property name="anotherMessage" value="Passed straight through to the dynamic-language-backed object" /&gt;

&lt;/lang&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In practice this limitation is not as significant as it first appears, since setter
injection is the injection style favored by the overwhelming majority of developers
(we leave the discussion as to whether that is a good thing to another day).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dynamic-language-beans-groovy"><a class="anchor" href="#dynamic-language-beans-groovy"></a>Groovy Beans</h3>
<div class="paragraph">
<p>This section describes how to use beans defined in Groovy in Spring.</p>
</div>
<div class="paragraph">
<p>The Groovy homepage includes the following description:</p>
</div>
<div class="paragraph">
<p>&#8220;Groovy is an agile dynamic language for the Java 2 Platform that has many of the
features that people like so much in languages like Python, Ruby and Smalltalk, making
them available to Java developers using a Java-like syntax.&#8221;</p>
</div>
<div class="paragraph">
<p>If you have read this chapter straight from the top, you have already
<a href="#dynamic-language-a-first-example">seen an example</a> of a Groovy-dynamic-language-backed
bean. Now consider another example (again using an example from the Spring test suite):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.springframework.scripting;

public interface Calculator {

	int add(int x, int y);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example implements the <code>Calculator</code> interface in Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// from the file 'calculator.groovy'
package org.springframework.scripting.groovy

class GroovyCalculator implements Calculator {

	int add(int x, int y) {
		x + y
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following bean definition uses the calculator defined in Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- from the file 'beans.xml' --&gt;
&lt;beans&gt;
	&lt;lang:groovy id="calculator" script-source="classpath:calculator.groovy"/&gt;
&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the following small application exercises the preceding configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.springframework.scripting;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Main {

	public static void main(String[] args) {
		ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");
		Calculator calc = ctx.getBean("calculator", Calculator.class);
		System.out.println(calc.add(2, 8));
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting output from running the above program is (unsurprisingly) <code>10</code>.
(For more interesting examples, see the dynamic language showcase project for a more
complex example or see the examples <a href="#dynamic-language-scenarios">Scenarios</a> later in this chapter).</p>
</div>
<div class="paragraph">
<p>You must not define more than one class per Groovy source file. While this is perfectly
legal in Groovy, it is (arguably) a bad practice. In the interests of a consistent
approach, you should (in the opinion of the Spring team) respect the standard Java
conventions of one (public) class per source file.</p>
</div>
<div class="sect3">
<h4 id="dynamic-language-beans-groovy-customizer"><a class="anchor" href="#dynamic-language-beans-groovy-customizer"></a>Customizing Groovy Objects by Using a Callback</h4>
<div class="paragraph">
<p>The <code>GroovyObjectCustomizer</code> interface is a callback that lets you hook additional
creation logic into the process of creating a Groovy-backed bean. For example,
implementations of this interface could invoke any required initialization methods,
set some default property values, or specify a custom <code>MetaClass</code>. The following listing
shows the <code>GroovyObjectCustomizer</code> interface definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface GroovyObjectCustomizer {

	void customize(GroovyObject goo);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Spring Framework instantiates an instance of your Groovy-backed bean and then
passes the created <code>GroovyObject</code> to the specified <code>GroovyObjectCustomizer</code> (if one
has been defined). You can do whatever you like with the supplied <code>GroovyObject</code>
reference. We expect that most people want to set a custom <code>MetaClass</code> with this
callback, and the following example shows how to do so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public final class SimpleMethodTracingCustomizer implements GroovyObjectCustomizer {

	public void customize(GroovyObject goo) {
		DelegatingMetaClass metaClass = new DelegatingMetaClass(goo.getMetaClass()) {

			public Object invokeMethod(Object object, String methodName, Object[] arguments) {
				System.out.println("Invoking '" + methodName + "'.");
				return super.invokeMethod(object, methodName, arguments);
			}
		};
		metaClass.initialize();
		goo.setMetaClass(metaClass);
	}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A full discussion of meta-programming in Groovy is beyond the scope of the Spring
reference manual. See the relevant section of the Groovy reference manual or do a
search online. Plenty of articles address this topic. Actually, making use of a
<code>GroovyObjectCustomizer</code> is easy if you use the Spring namespace support, as the
following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- define the GroovyObjectCustomizer just like any other bean --&gt;
&lt;bean id="tracingCustomizer" class="example.SimpleMethodTracingCustomizer"/&gt;

	&lt;!-- ... and plug it into the desired Groovy bean via the 'customizer-ref' attribute --&gt;
	&lt;lang:groovy id="calculator"
		script-source="classpath:org/springframework/scripting/groovy/Calculator.groovy"
		customizer-ref="tracingCustomizer"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you do not use the Spring namespace support, you can still use the
<code>GroovyObjectCustomizer</code> functionality, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="calculator" class="org.springframework.scripting.groovy.GroovyScriptFactory"&gt;
	&lt;constructor-arg value="classpath:org/springframework/scripting/groovy/Calculator.groovy"/&gt;
	&lt;!-- define the GroovyObjectCustomizer (as an inner bean) --&gt;
	&lt;constructor-arg&gt;
		&lt;bean id="tracingCustomizer" class="example.SimpleMethodTracingCustomizer"/&gt;
	&lt;/constructor-arg&gt;
&lt;/bean&gt;

&lt;bean class="org.springframework.scripting.support.ScriptFactoryPostProcessor"/&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You may also specify a Groovy <code>CompilationCustomizer</code> (such as an <code>ImportCustomizer</code>)
or even a full Groovy <code>CompilerConfiguration</code> object in the same place as Spring&#8217;s
<code>GroovyObjectCustomizer</code>. Furthermore, you may set a common <code>GroovyClassLoader</code> with custom
configuration for your beans at the <code>ConfigurableApplicationContext.setClassLoader</code> level;
this also leads to shared <code>GroovyClassLoader</code> usage and is therefore recommendable in case of
a large number of scripted beans (avoiding an isolated <code>GroovyClassLoader</code> instance per bean).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dynamic-language-beans-bsh"><a class="anchor" href="#dynamic-language-beans-bsh"></a>BeanShell Beans</h3>
<div class="paragraph">
<p>This section describes how to use BeanShell beans in Spring.</p>
</div>
<div class="paragraph">
<p>The <a href="https://beanshell.github.io/intro.html">BeanShell homepage</a> includes the following
description:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>BeanShell is a small, free, embeddable Java source interpreter with dynamic language
features, written in Java. BeanShell dynamically runs standard Java syntax and
extends it with common scripting conveniences such as loose types, commands, and method
closures like those in Perl and JavaScript.</pre>
</div>
</div>
<div class="paragraph">
<p>In contrast to Groovy, BeanShell-backed bean definitions require some (small) additional
configuration. The implementation of the BeanShell dynamic language support in Spring is
interesting, because Spring creates a JDK dynamic proxy that implements all of the
interfaces that are specified in the <code>script-interfaces</code> attribute value of the
<code>&lt;lang:bsh&gt;</code> element (this is why you must supply at least one interface in the value
of the attribute, and, consequently, program to interfaces when you use BeanShell-backed
beans). This means that every method call on a BeanShell-backed object goes through the
JDK dynamic proxy invocation mechanism.</p>
</div>
<div class="paragraph">
<p>Now we can show a fully working example of using a BeanShell-based bean that implements
the <code>Messenger</code> interface that was defined earlier in this chapter. We again show the
definition of the <code>Messenger</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.springframework.scripting;

public interface Messenger {

	String getMessage();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the BeanShell &#8220;implementation&#8221; (we use the term loosely here)
of the <code>Messenger</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String message;

String getMessage() {
	return message;
}

void setMessage(String aMessage) {
	message = aMessage;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the Spring XML that defines an &#8220;instance&#8221; of the above
&#8220;class&#8221; (again, we use these terms very loosely here):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;lang:bsh id="messageService" script-source="classpath:BshMessenger.bsh"
	script-interfaces="org.springframework.scripting.Messenger"&gt;

	&lt;lang:property name="message" value="Hello World!" /&gt;
&lt;/lang:bsh&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#dynamic-language-scenarios">Scenarios</a> for some scenarios where you might want to use
BeanShell-based beans.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dynamic-language-scenarios"><a class="anchor" href="#dynamic-language-scenarios"></a>Scenarios</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The possible scenarios where defining Spring managed beans in a scripting language would
be beneficial are many and varied. This section describes two possible use cases for the
dynamic language support in Spring.</p>
</div>
<div class="sect2">
<h3 id="dynamic-language-scenarios-controllers"><a class="anchor" href="#dynamic-language-scenarios-controllers"></a>Scripted Spring MVC Controllers</h3>
<div class="paragraph">
<p>One group of classes that can benefit from using dynamic-language-backed beans is that
of Spring MVC controllers. In pure Spring MVC applications, the navigational flow
through a web application is, to a large extent, determined by code encapsulated within
your Spring MVC controllers. As the navigational flow and other presentation layer logic
of a web application needs to be updated to respond to support issues or changing
business requirements, it may well be easier to effect any such required changes by
editing one or more dynamic language source files and seeing those changes being
immediately reflected in the state of a running application.</p>
</div>
<div class="paragraph">
<p>Remember that, in the lightweight architectural model espoused by projects such as
Spring, you typically aim to have a really thin presentation layer, with all
the meaty business logic of an application being contained in the domain and service
layer classes. Developing Spring MVC controllers as dynamic-language-backed beans lets
you change presentation layer logic by editing and saving text files. Any
changes to such dynamic language source files is (depending on the configuration)
automatically reflected in the beans that are backed by dynamic language source files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To effect this automatic &#8220;pickup&#8221; of any changes to dynamic-language-backed
beans, you have to enable the &#8220;refreshable beans&#8221; functionality. See
<a href="#dynamic-language-refreshable-beans">Refreshable Beans</a> for a full treatment of this feature.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows an <code>org.springframework.web.servlet.mvc.Controller</code> implemented
by using the Groovy dynamic language:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// from the file '/WEB-INF/groovy/FortuneController.groovy'
package org.springframework.showcase.fortune.web

import org.springframework.showcase.fortune.service.FortuneService
import org.springframework.showcase.fortune.domain.Fortune
import org.springframework.web.servlet.ModelAndView
import org.springframework.web.servlet.mvc.Controller

import javax.servlet.http.HttpServletRequest
import javax.servlet.http.HttpServletResponse

class FortuneController implements Controller {

	@Property FortuneService fortuneService

	ModelAndView handleRequest(HttpServletRequest request,
			HttpServletResponse httpServletResponse) {
		return new ModelAndView("tell", "fortune", this.fortuneService.tellFortune())
	}
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;lang:groovy id="fortune"
		refresh-check-delay="3000"
		script-source="/WEB-INF/groovy/FortuneController.groovy"&gt;
	&lt;lang:property name="fortuneService" ref="fortuneService"/&gt;
&lt;/lang:groovy&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dynamic-language-scenarios-validators"><a class="anchor" href="#dynamic-language-scenarios-validators"></a>Scripted Validators</h3>
<div class="paragraph">
<p>Another area of application development with Spring that may benefit from the
flexibility afforded by dynamic-language-backed beans is that of validation. It can
be easier to express complex validation logic by using a loosely typed dynamic language
(that may also have support for inline regular expressions) as opposed to regular Java.</p>
</div>
<div class="paragraph">
<p>Again, developing validators as dynamic-language-backed beans lets you change
validation logic by editing and saving a simple text file. Any such changes is
(depending on the configuration) automatically reflected in the execution of a
running application and would not require the restart of an application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To effect the automatic &#8220;pickup&#8221; of any changes to dynamic-language-backed
beans, you have to enable the 'refreshable beans' feature. See
<a href="#dynamic-language-refreshable-beans">Refreshable Beans</a> for a full and detailed treatment of this feature.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows a Spring <code>org.springframework.validation.Validator</code>
implemented by using the Groovy dynamic language (see <a href="../core.html#validator" class="page">Validation using Spring’s Validator interface</a> for a discussion of the
<code>Validator</code> interface):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">import org.springframework.validation.Validator
import org.springframework.validation.Errors
import org.springframework.beans.TestBean

class TestBeanValidator implements Validator {

	boolean supports(Class clazz) {
		return TestBean.class.isAssignableFrom(clazz)
	}

	void validate(Object bean, Errors errors) {
		if(bean.name?.trim()?.size() &gt; 0) {
			return
		}
		errors.reject("whitespace", "Cannot be composed wholly of whitespace.")
	}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dynamic-language-final-notes"><a class="anchor" href="#dynamic-language-final-notes"></a>Additional Details</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This last section contains some additional details related to the dynamic language support.</p>
</div>
<div class="sect2">
<h3 id="dynamic-language-final-notes-aop"><a class="anchor" href="#dynamic-language-final-notes-aop"></a>AOP&#8201;&#8212;&#8201;Advising Scripted Beans</h3>
<div class="paragraph">
<p>You can use the Spring AOP framework to advise scripted beans. The Spring AOP
framework actually is unaware that a bean that is being advised might be a scripted
bean, so all of the AOP use cases and functionality that you use (or aim to use)
work with scripted beans. When you advise scripted beans, you cannot use class-based
proxies. You must use <a href="../core.html#aop-proxying" class="page">interface-based proxies</a>.</p>
</div>
<div class="paragraph">
<p>You are not limited to advising scripted beans. You can also write aspects themselves
in a supported dynamic language and use such beans to advise other Spring beans.
This really would be an advanced use of the dynamic language support though.</p>
</div>
</div>
<div class="sect2">
<h3 id="dynamic-language-final-notes-scopes"><a class="anchor" href="#dynamic-language-final-notes-scopes"></a>Scoping</h3>
<div class="paragraph">
<p>In case it is not immediately obvious, scripted beans can be scoped in the same way as
any other bean. The <code>scope</code> attribute on the various <code>&lt;lang:language/&gt;</code> elements lets
you control the scope of the underlying scripted bean, as it does with a regular
bean. (The default scope is <a href="../core.html#beans-factory-scopes-singleton" class="page">singleton</a>,
as it is with &#8220;regular&#8221; beans.)</p>
</div>
<div class="paragraph">
<p>The following example uses the <code>scope</code> attribute to define a Groovy bean scoped as
a <a href="../core.html#beans-factory-scopes-prototype" class="page">prototype</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:lang="http://www.springframework.org/schema/lang"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/lang https://www.springframework.org/schema/lang/spring-lang.xsd"&gt;

	&lt;lang:groovy id="messenger" script-source="classpath:Messenger.groovy" scope="prototype"&gt;
		&lt;lang:property name="message" value="I Can Do The RoboCop" /&gt;
	&lt;/lang:groovy&gt;

	&lt;bean id="bookingService" class="x.y.DefaultBookingService"&gt;
		&lt;property name="messenger" ref="messenger" /&gt;
	&lt;/bean&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="../core.html#beans-factory-scopes" class="page">Bean Scopes</a> in <a href="../core.html#beans" class="page">The IoC Container</a>
for a full discussion of the scoping support in the Spring Framework.</p>
</div>
</div>
<div class="sect2">
<h3 id="xsd-schemas-lang"><a class="anchor" href="#xsd-schemas-lang"></a>The <code>lang</code> XML schema</h3>
<div class="paragraph">
<p>The <code>lang</code> elements in Spring XML configuration deal with exposing objects that have been
written in a dynamic language (such as Groovy or BeanShell) as beans in the Spring container.</p>
</div>
<div class="paragraph">
<p>These elements (and the dynamic language support) are comprehensively covered in
<a href="#dynamic-language">Dynamic Language Support</a>. See that section
for full details on this support and the <code>lang</code> elements.</p>
</div>
<div class="paragraph">
<p>To use the elements in the <code>lang</code> schema, you need to have the following preamble at the
top of your Spring XML configuration file. The text in the following snippet references
the correct schema so that the tags in the <code>lang</code> namespace are available to you:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:lang="http://www.springframework.org/schema/lang"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/lang https://www.springframework.org/schema/lang/spring-lang.xsd"&gt;

	&lt;!-- bean definitions here --&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dynamic-language-resources"><a class="anchor" href="#dynamic-language-resources"></a>Further Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following links go to further resources about the various dynamic languages referenced
in this chapter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://www.groovy-lang.org/">Groovy</a> homepage</p>
</li>
<li>
<p>The <a href="https://beanshell.github.io/intro.html">BeanShell</a> homepage</p>
</li>
<li>
<p>The <a href="https://www.jruby.org">JRuby</a> homepage</p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer flex">
    <div id="spring-links flex">
        <img id="springlogo" src="../../../_/img/spring-logo.svg" alt="Spring">
        <p class="smallest antialiased">© <script>var d = new Date();
        document.write(d.getFullYear());</script> <a href="https://www.vmware.com/">VMware</a>, Inc. or its affiliates. <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> • <a href="https://www.vmware.com/help/privacy.html" rel="noopener noreferrer">Privacy</a> • <a href="https://spring.io/trademarks">Trademark Guidelines</a> <span id="thank-you-mobile">• <a href="https://spring.io/thank-you">Thank you</a></span> • <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> • <a class="ot-sdk-show-settings">Cookie Settings</a> <span id="teconsent"></span></p>
        <p class="smallest antialiased">Apache®, Apache Tomcat®, Apache Kafka®, Apache Cassandra&trade;, and Apache Geode&trade; are trademarks or registered trademarks of the Apache Software Foundation in the United States and/or other countries. Java&trade;, Java&trade; SE, Java&trade; EE, and OpenJDK&trade; are trademarks of Oracle and/or its affiliates. Kubernetes® is a registered trademark of the Linux Foundation in the United States and other countries. Linux® is the registered trademark of Linus Torvalds in the United States and other countries. Windows® and Microsoft® Azure are registered trademarks of Microsoft Corporation. “AWS” and “Amazon Web Services” are trademarks or registered trademarks of Amazon.com Inc. or its affiliates. All other trademarks and copyrights are property of their respective owners and are only mentioned for informative purposes. Other names may be trademarks of their respective owners.</p>
    </div>
    <div id="social-icons" class="flex jc-between">
        <a href="https://www.youtube.com/user/SpringSourceDev" title="Youtube"><svg id="youtube-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><circle class="cls-1" cx="20" cy="20" r="20"/><path class="cls-2" d="M30.91,14.53a2.89,2.89,0,0,0-2-2C27.12,12,20,12,20,12s-7.12,0-8.9.47a2.9,2.9,0,0,0-2,2A30.56,30.56,0,0,0,8.63,20a30.44,30.44,0,0,0,.46,5.47,2.89,2.89,0,0,0,2,2C12.9,28,20,28,20,28s7.12,0,8.9-.47a2.87,2.87,0,0,0,2-2A30.56,30.56,0,0,0,31.37,20,28.88,28.88,0,0,0,30.91,14.53ZM17.73,23.41V16.59L23.65,20Z"/></svg></a>
        <a href="https://github.com/spring-projects" title="Github"><svg id="github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><path class="cls-1" d="M38,0a38,38,0,1,0,38,38A38,38,0,0,0,38,0Z"/></g><path class="cls-2" d="M38,15.59A22.95,22.95,0,0,0,30.71,60.3c1.15.21,1.57-.5,1.57-1.11s0-2,0-3.9c-6.38,1.39-7.73-3.07-7.73-3.07A6.09,6.09,0,0,0,22,48.86c-2.09-1.42.15-1.39.15-1.39a4.81,4.81,0,0,1,3.52,2.36c2,3.5,5.37,2.49,6.67,1.91a4.87,4.87,0,0,1,1.46-3.07c-5.09-.58-10.45-2.55-10.45-11.34a8.84,8.84,0,0,1,2.36-6.15,8.29,8.29,0,0,1,.23-6.07s1.92-.62,6.3,2.35a21.82,21.82,0,0,1,11.49,0c4.38-3,6.3-2.35,6.3-2.35a8.29,8.29,0,0,1,.23,6.07,8.84,8.84,0,0,1,2.36,6.15c0,8.81-5.37,10.75-10.48,11.32a5.46,5.46,0,0,1,1.56,4.25c0,3.07,0,5.54,0,6.29s.42,1.33,1.58,1.1A22.94,22.94,0,0,0,38,15.59Z"/></svg></a>
        <a href="https://twitter.com/springcentral" title="Twitter"><svg id="twitter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><circle class="cls-1" cx="37.97" cy="37.97" r="37.97"/><path id="Twitter-2" data-name="Twitter" class="cls-2" d="M55.2,22.73a15.43,15.43,0,0,1-4.88,1.91,7.56,7.56,0,0,0-5.61-2.49A7.78,7.78,0,0,0,37,30a7.56,7.56,0,0,0,.2,1.79,21.63,21.63,0,0,1-15.84-8.23,8,8,0,0,0,2.37,10.52,7.66,7.66,0,0,1-3.48-1v.09A7.84,7.84,0,0,0,26.45,41a7.54,7.54,0,0,1-2,.28A7.64,7.64,0,0,1,23,41.09a7.71,7.71,0,0,0,7.18,5.47,15.21,15.21,0,0,1-9.55,3.37,15.78,15.78,0,0,1-1.83-.11,21.41,21.41,0,0,0,11.78,3.54c14.13,0,21.86-12,21.86-22.42,0-.34,0-.68,0-1a15.67,15.67,0,0,0,3.83-4.08,14.9,14.9,0,0,1-4.41,1.24A7.8,7.8,0,0,0,55.2,22.73Z"/></svg></a>
    </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/tabs.js"></script>
<script src="../../../_/js/vendor/docsearch.min.js"></script>
<script src="../../../_/js/vendor/switchtheme.js"></script>
<!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js -->
<script>
docsearch({
  apiKey: '6098173f7ca8a2fc7db296538ae8a6cc',
  indexName: 'spring',
  inputSelector: '#search-input',
  algoliaOptions: { hitsPerPage: 10 }
})
</script>
  </body>
</html>
